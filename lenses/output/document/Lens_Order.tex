%
\begin{isabellebody}%
\setisabellecontext{Lens{\isacharunderscore}Order}%
%
\isamarkupsection{Order and equivalence on lenses%
}
\isamarkuptrue%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Lens{\isacharunderscore}Order\isanewline
\isakeyword{imports}\ Lens{\isacharunderscore}Algebra\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\begin{isamarkuptext}%
A lens $X$ is a sub-lens of $Y$ if there is a well-behaved lens $Z$ such that $X = Z \lcomp Y$,
  or in other words if $X$ can be expressed purely in terms of $Y$.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{definition}\isamarkupfalse%
\ sublens\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymLongrightarrow}\ {\isacharprime}c{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}b\ {\isasymLongrightarrow}\ {\isacharprime}c{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isasymsubseteq}\isactrlsub L{\isachardoublequoteclose}\ {\isadigit{5}}{\isadigit{5}}{\isacharparenright}\ \isakeyword{where}\isanewline
{\isacharbrackleft}lens{\isacharunderscore}defs{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}sublens\ X\ Y\ {\isacharequal}\ {\isacharparenleft}{\isasymexists}\ Z\ {\isacharcolon}{\isacharcolon}\ {\isacharparenleft}{\isacharprime}a{\isacharcomma}\ {\isacharprime}b{\isacharparenright}\ lens{\isachardot}\ vwb{\isacharunderscore}lens\ Z\ {\isasymand}\ X\ {\isacharequal}\ Z\ {\isacharsemicolon}\isactrlsub L\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}pres{\isacharunderscore}mwb{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ mwb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ mwb{\isacharunderscore}lens\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharcomma}\ auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}pres{\isacharunderscore}wb{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ wb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ wb{\isacharunderscore}lens\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharcomma}\ auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}pres{\isacharunderscore}vwb{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ vwb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ vwb{\isacharunderscore}lens\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharcomma}\ auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}refl{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}X\ {\isasymsubseteq}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ id{\isacharunderscore}vwb{\isacharunderscore}lens\ sublens{\isacharunderscore}def\ \isacommand{by}\isamarkupfalse%
\ force%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}trans{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymsubseteq}\isactrlsub L\ Y{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isasymsubseteq}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}assoc{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z\isactrlsub {\isadigit{1}}\ Z\isactrlsub {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Z\isactrlsub {\isadigit{1}}\ {\isacharsemicolon}\isactrlsub L\ Z\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}assoc{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}least{\isacharcolon}\ {\isachardoublequoteopen}wb{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ {\isadigit{0}}\isactrlsub L\ {\isasymsubseteq}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ sublens{\isacharunderscore}def\ unit{\isacharunderscore}vwb{\isacharunderscore}lens\ \isacommand{by}\isamarkupfalse%
\ fastforce%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}greatest{\isacharcolon}\ {\isachardoublequoteopen}vwb{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ X\ {\isasymsubseteq}\isactrlsub L\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}put{\isacharunderscore}put{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ mwb{\isacharunderscore}lens\ X{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ X\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ lens{\isacharunderscore}put\ X\ {\isacharparenleft}lens{\isacharunderscore}put\ Y\ {\isasymsigma}\ v{\isacharparenright}\ u\ {\isacharequal}\ lens{\isacharunderscore}put\ X\ {\isasymsigma}\ u{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}obs{\isacharunderscore}get{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ mwb{\isacharunderscore}lens\ X{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ X\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ \ get\isactrlbsub Y\isactrlesub \ {\isacharparenleft}put\isactrlbsub X\isactrlesub \ {\isasymsigma}\ v{\isacharparenright}\ {\isacharequal}\ get\isactrlbsub Y\isactrlesub \ {\isacharparenleft}put\isactrlbsub X\isactrlesub \ {\isasymrho}\ v{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{definition}\isamarkupfalse%
\ lens{\isacharunderscore}equiv\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}{\isacharprime}a\ {\isasymLongrightarrow}\ {\isacharprime}c{\isacharparenright}\ {\isasymRightarrow}\ {\isacharparenleft}{\isacharprime}b\ {\isasymLongrightarrow}\ {\isacharprime}c{\isacharparenright}\ {\isasymRightarrow}\ bool{\isachardoublequoteclose}\ {\isacharparenleft}\isakeyword{infix}\ {\isachardoublequoteopen}{\isasymapprox}\isactrlsub L{\isachardoublequoteclose}\ {\isadigit{5}}{\isadigit{1}}{\isacharparenright}\ \isakeyword{where}\isanewline
{\isacharbrackleft}lens{\isacharunderscore}defs{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}lens{\isacharunderscore}equiv\ X\ Y\ {\isacharequal}\ {\isacharparenleft}X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymand}\ Y\ {\isasymsubseteq}\isactrlsub L\ X{\isacharparenright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}equivI\ {\isacharbrackleft}intro{\isacharbrackright}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymsubseteq}\isactrlsub L\ Y{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ X\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isasymapprox}\isactrlsub L\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}refl{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}X\ {\isasymapprox}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ sublens{\isacharunderscore}refl{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}sym{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}X\ {\isasymapprox}\isactrlsub L\ Y\ {\isasymLongrightarrow}\ Y\ {\isasymapprox}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}trans{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymapprox}\isactrlsub L\ Y{\isacharsemicolon}\ Y\ {\isasymapprox}\isactrlsub L\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isasymapprox}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ sublens{\isacharunderscore}trans\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ sublens{\isacharunderscore}pres{\isacharunderscore}indep{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymsubseteq}\isactrlsub L\ Y{\isacharsemicolon}\ Y\ {\isasymbowtie}\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isasymbowtie}\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharbang}{\isacharcolon}lens{\isacharunderscore}indepI\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ lens{\isacharunderscore}indep{\isacharunderscore}comm{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}indep{\isacharunderscore}sym{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}quotient{\isacharunderscore}mwb{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ mwb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ mwb{\isacharunderscore}lens\ {\isacharparenleft}X\ {\isacharslash}\isactrlsub L\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharcomma}\ auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ lens{\isacharunderscore}create{\isacharunderscore}def\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\isamarkupsubsection{Lens algebraic laws%
}
\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ plus{\isacharunderscore}lens{\isacharunderscore}distr{\isacharcolon}\ {\isachardoublequoteopen}mwb{\isacharunderscore}lens\ Z\ {\isasymLongrightarrow}\ {\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isacharsemicolon}\isactrlsub L\ Z\ {\isacharequal}\ {\isacharparenleft}X\ {\isacharsemicolon}\isactrlsub L\ Z{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}Y\ {\isacharsemicolon}\isactrlsub L\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def\ comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
This law explains the behaviour of lens quotient.%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}quotient{\isacharunderscore}comp{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ weak{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isacharparenleft}X\ {\isacharslash}\isactrlsub L\ Y{\isacharparenright}\ {\isacharsemicolon}\isactrlsub L\ Y\ {\isacharequal}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def\ sublens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}comp{\isacharunderscore}quotient{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}weak{\isacharunderscore}lens\ Y\ {\isasymLongrightarrow}\ {\isacharparenleft}X\ {\isacharsemicolon}\isactrlsub L\ Y{\isacharparenright}\ {\isacharslash}\isactrlsub L\ Y\ {\isacharequal}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}quotient{\isacharunderscore}id{\isacharcolon}\ {\isachardoublequoteopen}weak{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ {\isacharparenleft}X\ {\isacharslash}\isactrlsub L\ X{\isacharparenright}\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}force\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}quotient{\isacharunderscore}id{\isacharunderscore}denom{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isacharslash}\isactrlsub L\ {\isadigit{1}}\isactrlsub L\ {\isacharequal}\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def\ lens{\isacharunderscore}create{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}quotient{\isacharunderscore}unit{\isacharcolon}\ {\isachardoublequoteopen}weak{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ {\isacharparenleft}{\isadigit{0}}\isactrlsub L\ {\isacharslash}\isactrlsub L\ X{\isacharparenright}\ {\isacharequal}\ {\isadigit{0}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ zero{\isacharunderscore}lens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}quotient{\isacharunderscore}plus{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ mwb{\isacharunderscore}lens\ Z{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Z{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isacharslash}\isactrlsub L\ Z\ {\isacharequal}\ {\isacharparenleft}X\ {\isacharslash}\isactrlsub L\ Z{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}Y\ {\isacharslash}\isactrlsub L\ Z{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}quotient{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ plus{\isacharunderscore}pred{\isacharunderscore}sublens{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ mwb{\isacharunderscore}lens\ Z{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Z{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ Z{\isacharsemicolon}\ X\ {\isasymbowtie}\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isasymsubseteq}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z\isactrlsub {\isadigit{1}}\ Z\isactrlsub {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Z\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Z\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharbang}{\isacharcolon}\ plus{\isacharunderscore}wb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}indep{\isacharunderscore}cong{\isacharunderscore}left\ plus{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ plus{\isacharunderscore}lens{\isacharunderscore}distr{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}sub{\isacharunderscore}assoc{\isacharunderscore}{\isadigit{1}}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}X\ {\isacharplus}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ Z\ {\isasymsubseteq}\isactrlsub L\ {\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}fst\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ fst\isactrlsub L{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}snd\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ fst\isactrlsub L{\isacharparenright}\ {\isacharplus}\isactrlsub L\ snd\isactrlsub L{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ fst{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ snd{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ snd{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ lens{\isacharunderscore}indep{\isacharunderscore}left{\isacharunderscore}ext{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lens{\isacharunderscore}indep{\isacharunderscore}sym{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}pres{\isacharunderscore}lens{\isacharunderscore}indep{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ lens{\isacharunderscore}indep{\isacharunderscore}left{\isacharunderscore}comp\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ vwb{\isacharunderscore}lens{\isacharunderscore}mwb\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ lens{\isacharunderscore}indep{\isacharunderscore}left{\isacharunderscore}ext\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}plus{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ fst{\isacharunderscore}lens{\isacharunderscore}def\ snd{\isacharunderscore}lens{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if\ split{\isacharunderscore}beta{\isacharprime}{\isacharparenright}{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}sub{\isacharunderscore}assoc{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isacharplus}\isactrlsub L\ Z\ {\isasymsubseteq}\isactrlsub L\ X\ {\isacharplus}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}fst\isactrlsub L\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}fst\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isacharparenright}{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}snd\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ fst{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ snd{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lens{\isacharunderscore}indep{\isacharunderscore}sym{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lens{\isacharunderscore}indep{\isacharunderscore}left{\isacharunderscore}ext{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharcolon}\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ simp\ add{\isacharcolon}\ snd{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}pres{\isacharunderscore}lens{\isacharunderscore}indep{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ lens{\isacharunderscore}indep{\isacharunderscore}left{\isacharunderscore}ext\ lens{\isacharunderscore}indep{\isacharunderscore}sym{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ lens{\isacharunderscore}indep{\isacharunderscore}left{\isacharunderscore}comp\ snd{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}plus{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ fst{\isacharunderscore}lens{\isacharunderscore}def\ snd{\isacharunderscore}lens{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if\ split{\isacharunderscore}beta{\isacharprime}{\isacharparenright}{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}assoc{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isacharplus}\isactrlsub L\ Z\ {\isasymapprox}\isactrlsub L\ X\ {\isacharplus}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equivI\ lens{\isacharunderscore}plus{\isacharunderscore}sub{\isacharunderscore}assoc{\isacharunderscore}{\isadigit{1}}\ lens{\isacharunderscore}plus{\isacharunderscore}sub{\isacharunderscore}assoc{\isacharunderscore}{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}sub{\isacharunderscore}comm{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isasymbowtie}\ Y\ {\isasymLongrightarrow}\ X\ {\isacharplus}\isactrlsub L\ Y\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}snd\isactrlsub L\ {\isacharplus}\isactrlsub L\ fst\isactrlsub L{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ fst{\isacharunderscore}snd{\isacharunderscore}lens{\isacharunderscore}indep\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ plus{\isacharunderscore}vwb{\isacharunderscore}lens\ snd{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ lens{\isacharunderscore}plus{\isacharunderscore}swap{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}comm{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isasymbowtie}\ Y\ {\isasymLongrightarrow}\ X\ {\isacharplus}\isactrlsub L\ Y\ {\isasymapprox}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equivI\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ lens{\isacharunderscore}plus{\isacharunderscore}sub{\isacharunderscore}comm{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}ub{\isacharcolon}\ {\isachardoublequoteopen}wb{\isacharunderscore}lens\ Y\ {\isasymLongrightarrow}\ X\ {\isasymsubseteq}\isactrlsub L\ X\ {\isacharplus}\isactrlsub L\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ fst{\isacharunderscore}lens{\isacharunderscore}plus\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ sublens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}right{\isacharunderscore}sublens{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ vwb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ Y\ {\isasymbowtie}\ Z{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Z{\isacharprime}\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ snd{\isacharunderscore}vwb{\isacharunderscore}lens\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}assoc\ snd{\isacharunderscore}lens{\isacharunderscore}plus{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}comp{\isacharunderscore}lb\ {\isacharbrackleft}simp{\isacharbrackright}{\isacharcolon}\ {\isachardoublequoteopen}vwb{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ X\ {\isacharsemicolon}\isactrlsub L\ Y\ {\isasymsubseteq}\isactrlsub L\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}unit{\isacharunderscore}plus{\isacharunderscore}sublens{\isacharunderscore}{\isadigit{1}}{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isasymsubseteq}\isactrlsub L\ {\isadigit{0}}\isactrlsub L\ {\isacharplus}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ lens{\isacharunderscore}comp{\isacharunderscore}lb\ snd{\isacharunderscore}lens{\isacharunderscore}plus\ snd{\isacharunderscore}vwb{\isacharunderscore}lens\ zero{\isacharunderscore}lens{\isacharunderscore}indep\ unit{\isacharunderscore}wb{\isacharunderscore}lens{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}unit{\isacharunderscore}prod{\isacharunderscore}sublens{\isacharunderscore}{\isadigit{2}}{\isacharcolon}\ {\isachardoublequoteopen}{\isadigit{0}}\isactrlsub L\ {\isacharplus}\isactrlsub L\ X\ {\isasymsubseteq}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}{\isadigit{0}}\isactrlsub L\ {\isacharplus}\isactrlsub L\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ plus{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ unit{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ id{\isacharunderscore}vwb{\isacharunderscore}lens{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ zero{\isacharunderscore}lens{\isacharunderscore}indep{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}plus{\isacharunderscore}def\ zero{\isacharunderscore}lens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if\ comp{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}left{\isacharunderscore}unit{\isacharcolon}\ {\isachardoublequoteopen}{\isadigit{0}}\isactrlsub L\ {\isacharplus}\isactrlsub L\ X\ {\isasymapprox}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equivI\ lens{\isacharunderscore}unit{\isacharunderscore}plus{\isacharunderscore}sublens{\isacharunderscore}{\isadigit{1}}\ lens{\isacharunderscore}unit{\isacharunderscore}prod{\isacharunderscore}sublens{\isacharunderscore}{\isadigit{2}}{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}right{\isacharunderscore}unit{\isacharcolon}\ {\isachardoublequoteopen}X\ {\isacharplus}\isactrlsub L\ {\isadigit{0}}\isactrlsub L\ {\isasymapprox}\isactrlsub L\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}trans\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ lens{\isacharunderscore}plus{\isacharunderscore}comm\ lens{\isacharunderscore}plus{\isacharunderscore}left{\isacharunderscore}unit\ zero{\isacharunderscore}lens{\isacharunderscore}indep\ \isacommand{by}\isamarkupfalse%
\ blast%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}mono{\isacharunderscore}left{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ Y\ {\isasymbowtie}\ Z{\isacharsemicolon}\ X\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isacharplus}\isactrlsub L\ Z\ {\isasymsubseteq}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z{\isacharprime}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Z{\isacharprime}\ {\isasymtimes}\isactrlsub L\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subst\ prod{\isacharunderscore}lens{\isacharunderscore}comp{\isacharunderscore}plus{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ id{\isacharunderscore}vwb{\isacharunderscore}lens\ prod{\isacharunderscore}vwb{\isacharunderscore}lens\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}mono{\isacharunderscore}right{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymbowtie}\ Z{\isacharsemicolon}\ Y\ {\isasymsubseteq}\isactrlsub L\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isacharplus}\isactrlsub L\ Y\ {\isasymsubseteq}\isactrlsub L\ X\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ prod{\isacharunderscore}lens{\isacharunderscore}comp{\isacharunderscore}plus\ prod{\isacharunderscore}vwb{\isacharunderscore}lens\ sublens{\isacharunderscore}def\ sublens{\isacharunderscore}refl{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}subcong{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ Y\isactrlsub {\isadigit{1}}\ {\isasymbowtie}\ Y\isactrlsub {\isadigit{2}}{\isacharsemicolon}\ X\isactrlsub {\isadigit{1}}\ {\isasymsubseteq}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isacharsemicolon}\ X\isactrlsub {\isadigit{2}}\ {\isasymsubseteq}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}\ {\isasymsubseteq}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}metis\ prod{\isacharunderscore}lens{\isacharunderscore}comp{\isacharunderscore}plus\ prod{\isacharunderscore}vwb{\isacharunderscore}lens\ sublens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\ \ \ \ \ \ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}eq{\isacharunderscore}left{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymbowtie}\ Z{\isacharsemicolon}\ X\ {\isasymapprox}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isacharplus}\isactrlsub L\ Z\ {\isasymapprox}\isactrlsub L\ Y\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}mono{\isacharunderscore}left\ sublens{\isacharunderscore}pres{\isacharunderscore}indep{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}eq{\isacharunderscore}right{\isacharcolon}\ {\isachardoublequoteopen}{\isasymlbrakk}\ X\ {\isasymbowtie}\ Y{\isacharsemicolon}\ Y\ {\isasymapprox}\isactrlsub L\ Z\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ X\ {\isacharplus}\isactrlsub L\ Y\ {\isasymapprox}\isactrlsub L\ X\ {\isacharplus}\isactrlsub L\ Z{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ lens{\isacharunderscore}indep{\isacharunderscore}sym\ lens{\isacharunderscore}plus{\isacharunderscore}mono{\isacharunderscore}right\ sublens{\isacharunderscore}pres{\isacharunderscore}indep{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \ \ \ \ \ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}cong{\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}X\isactrlsub {\isadigit{1}}\ {\isasymbowtie}\ X\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\isactrlsub {\isadigit{1}}\ {\isasymapprox}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\isactrlsub {\isadigit{2}}\ {\isasymapprox}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}X\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}\ {\isasymapprox}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharminus}\isanewline
\ \ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}X\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}\ {\isasymapprox}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ lens{\isacharunderscore}plus{\isacharunderscore}eq{\isacharunderscore}left{\isacharparenright}\isanewline
\ \ \isacommand{moreover}\isamarkupfalse%
\ \isacommand{have}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isachardot}{\isachardot}{\isachardot}\ {\isasymapprox}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ assms{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ assms{\isacharparenleft}{\isadigit{3}}{\isacharparenright}\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}eq{\isacharunderscore}right\ sublens{\isacharunderscore}pres{\isacharunderscore}indep\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{ultimately}\isamarkupfalse%
\ \isacommand{show}\isamarkupfalse%
\ {\isacharquery}thesis\isanewline
\ \ \ \ \isacommand{using}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}trans\ \isacommand{by}\isamarkupfalse%
\ blast\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \ \ \ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ prod{\isacharunderscore}lens{\isacharunderscore}sublens{\isacharunderscore}cong{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\isactrlsub {\isadigit{1}}\ {\isasymsubseteq}\isactrlsub L\ X\isactrlsub {\isadigit{2}}{\isacharsemicolon}\ Y\isactrlsub {\isadigit{1}}\ {\isasymsubseteq}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymsubseteq}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{2}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z\isactrlsub {\isadigit{1}}\ Z\isactrlsub {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Z\isactrlsub {\isadigit{1}}\ {\isasymtimes}\isactrlsub L\ Z\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ prod{\isacharunderscore}vwb{\isacharunderscore}lens\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}prod{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharcomma}\ rule\ ext{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}prod{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ prod{\isacharunderscore}lens{\isacharunderscore}equiv{\isacharunderscore}cong{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ X\isactrlsub {\isadigit{1}}\ {\isasymapprox}\isactrlsub L\ X\isactrlsub {\isadigit{2}}{\isacharsemicolon}\ Y\isactrlsub {\isadigit{1}}\ {\isasymapprox}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isasymapprox}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{2}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ prod{\isacharunderscore}lens{\isacharunderscore}sublens{\isacharunderscore}cong{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}plus{\isacharunderscore}prod{\isacharunderscore}exchange{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isasymtimes}\isactrlsub L\ {\isacharparenleft}Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isasymapprox}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{2}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
%
\endisadelimproof
%
\isatagproof
\isacommand{proof}\isamarkupfalse%
\ {\isacharparenleft}rule\ lens{\isacharunderscore}equivI{\isacharparenright}\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isasymtimes}\isactrlsub L\ {\isacharparenleft}Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isasymsubseteq}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{2}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}fst\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ fst\isactrlsub L{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}fst\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isacharparenright}{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}{\isacharparenleft}snd\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ fst\isactrlsub L{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}snd\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharbang}{\isacharcolon}\ plus{\isacharunderscore}vwb{\isacharunderscore}lens\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ snd{\isacharunderscore}vwb{\isacharunderscore}lens\ lens{\isacharunderscore}indep{\isacharunderscore}right{\isacharunderscore}comp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharbang}{\isacharcolon}\ lens{\isacharunderscore}indepI\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def\ fst{\isacharunderscore}lens{\isacharunderscore}def\ snd{\isacharunderscore}lens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}prod{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ fst{\isacharunderscore}lens{\isacharunderscore}def\ snd{\isacharunderscore}lens{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if\ comp{\isacharunderscore}def{\isacharparenright}{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharcomma}\ rule\ ext{\isacharcomma}\ auto\ simp\ add{\isacharcolon}\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
\isanewline
\ \ \isacommand{show}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{1}}{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{2}}\ {\isasymtimes}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isasymsubseteq}\isactrlsub L\ {\isacharparenleft}X\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ X\isactrlsub {\isadigit{2}}{\isacharparenright}\ {\isasymtimes}\isactrlsub L\ {\isacharparenleft}Y\isactrlsub {\isadigit{1}}\ {\isacharplus}\isactrlsub L\ Y\isactrlsub {\isadigit{2}}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}{\isacharparenleft}{\isacharparenleft}fst\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ fst\isactrlsub L{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}fst\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isacharparenright}{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}{\isacharparenleft}snd\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ fst\isactrlsub L{\isacharparenright}\ {\isacharplus}\isactrlsub L\ {\isacharparenleft}snd\isactrlsub L\ {\isacharsemicolon}\isactrlsub L\ snd\isactrlsub L{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharbang}{\isacharcolon}\ plus{\isacharunderscore}vwb{\isacharunderscore}lens\ comp{\isacharunderscore}vwb{\isacharunderscore}lens\ fst{\isacharunderscore}vwb{\isacharunderscore}lens\ snd{\isacharunderscore}vwb{\isacharunderscore}lens\ lens{\isacharunderscore}indep{\isacharunderscore}right{\isacharunderscore}comp{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ intro{\isacharbang}{\isacharcolon}\ lens{\isacharunderscore}indepI\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def\ fst{\isacharunderscore}lens{\isacharunderscore}def\ snd{\isacharunderscore}lens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}prod{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ fst{\isacharunderscore}lens{\isacharunderscore}def\ snd{\isacharunderscore}lens{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if\ comp{\isacharunderscore}def{\isacharparenright}{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ ext{\isacharcomma}\ rule\ ext{\isacharcomma}\ auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}prod{\isacharunderscore}def\ prod{\isachardot}case{\isacharunderscore}eq{\isacharunderscore}if{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
\isanewline
\isacommand{qed}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\ \ \isanewline
\isacommand{lemma}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}inv{\isacharunderscore}left{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}bij{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ inv\isactrlsub L\ X\ {\isacharsemicolon}\isactrlsub L\ X\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}inv{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def{\isacharcomma}\ rule\ ext{\isacharcomma}\ auto{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}inv{\isacharunderscore}right{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}bij{\isacharunderscore}lens\ X\ {\isasymLongrightarrow}\ X\ {\isacharsemicolon}\isactrlsub L\ inv\isactrlsub L\ X\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}inv{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def{\isacharcomma}\ rule\ ext{\isacharcomma}\ auto{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Bijective lenses are precisely those that are equivalent to identity%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}equiv{\isacharunderscore}id{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}bij{\isacharunderscore}lens\ X\ {\isasymlongleftrightarrow}\ X\ {\isasymapprox}\isactrlsub L\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ lens{\isacharunderscore}equivI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all\ add{\isacharcolon}\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}lens{\isacharunderscore}inv\ X{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ bij{\isacharunderscore}lens{\isacharunderscore}inv{\isacharunderscore}left\ lens{\isacharunderscore}inv{\isacharunderscore}bij{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ sublens{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ {\isacharparenleft}no{\isacharunderscore}types{\isacharcomma}\ lifting{\isacharparenright}\ vwb{\isacharunderscore}lens{\isacharunderscore}wb\ wb{\isacharunderscore}lens{\isacharunderscore}weak\ weak{\isacharunderscore}lens{\isachardot}put{\isacharunderscore}get{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}equiv{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ bij{\isacharunderscore}lens\ X{\isacharsemicolon}\ X\ {\isasymapprox}\isactrlsub L\ Y\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ bij{\isacharunderscore}lens\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}meson\ bij{\isacharunderscore}lens{\isacharunderscore}equiv{\isacharunderscore}id\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ sublens{\isacharunderscore}trans{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}id{\isacharunderscore}unique{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}weak{\isacharunderscore}lens\ Y\ {\isasymLongrightarrow}\ Y\ {\isacharequal}\ X\ {\isacharsemicolon}\isactrlsub L\ Y\ {\isasymLongrightarrow}\ X\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ Y{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ X{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def\ fun{\isacharunderscore}eq{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ weak{\isacharunderscore}lens{\isachardot}create{\isacharunderscore}get{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ weak{\isacharunderscore}lens{\isachardot}put{\isacharunderscore}get{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}via{\isacharunderscore}comp{\isacharunderscore}id{\isacharunderscore}left{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ wb{\isacharunderscore}lens\ X{\isacharsemicolon}\ wb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isacharsemicolon}\isactrlsub L\ Y\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ bij{\isacharunderscore}lens\ X{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ Y{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ X{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def\ fun{\isacharunderscore}eq{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ vwb{\isacharunderscore}lens{\isacharunderscore}wb\ wb{\isacharunderscore}lens{\isacharunderscore}weak\ weak{\isacharunderscore}lens{\isachardot}put{\isacharunderscore}get\ \isacommand{apply}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ wb{\isacharunderscore}lens{\isacharunderscore}weak\ weak{\isacharunderscore}lens{\isachardot}put{\isacharunderscore}get{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}via{\isacharunderscore}comp{\isacharunderscore}id{\isacharunderscore}right{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlbrakk}\ wb{\isacharunderscore}lens\ X{\isacharsemicolon}\ wb{\isacharunderscore}lens\ Y{\isacharsemicolon}\ X\ {\isacharsemicolon}\isactrlsub L\ Y\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L\ {\isasymrbrakk}\ {\isasymLongrightarrow}\ bij{\isacharunderscore}lens\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ Y{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}cases\ X{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}def\ comp{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def\ fun{\isacharunderscore}eq{\isacharunderscore}iff{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}unfold{\isacharunderscore}locales{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharunderscore}all{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ vwb{\isacharunderscore}lens{\isacharunderscore}wb\ wb{\isacharunderscore}lens{\isacharunderscore}weak\ weak{\isacharunderscore}lens{\isachardot}put{\isacharunderscore}get\ \isacommand{apply}\isamarkupfalse%
\ fastforce\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{1}}{\isacharparenright}\ select{\isacharunderscore}convs{\isacharparenleft}{\isadigit{2}}{\isacharparenright}\ wb{\isacharunderscore}lens{\isacharunderscore}weak\ weak{\isacharunderscore}lens{\isachardot}put{\isacharunderscore}get{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
An equivalence can be proved by demonstrating a suitable bijective lens%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}via{\isacharunderscore}bij{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}bij{\isacharunderscore}lens\ Z{\isachardoublequoteclose}\ {\isachardoublequoteopen}X\ {\isacharequal}\ Z\ {\isacharsemicolon}\isactrlsub L\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}X\ {\isasymapprox}\isactrlsub L\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ sublens{\isacharunderscore}def{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}vwb\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}lens{\isacharunderscore}inv\ Z{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}comp{\isacharunderscore}assoc\ bij{\isacharunderscore}lens{\isacharunderscore}inv{\isacharunderscore}left{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ bij{\isacharunderscore}lens{\isacharunderscore}vwb\ lens{\isacharunderscore}inv{\isacharunderscore}bij\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ bij{\isacharunderscore}lens{\isacharunderscore}inv{\isacharunderscore}left\ lens{\isacharunderscore}comp{\isacharunderscore}assoc{\isacharbrackleft}THEN\ sym{\isacharbrackright}{\isacharparenright}\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}iff{\isacharunderscore}bij{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}weak{\isacharunderscore}lens\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}X\ {\isasymapprox}\isactrlsub L\ Y\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\isasymexists}\ Z{\isachardot}\ bij{\isacharunderscore}lens\ Z\ {\isasymand}\ X\ {\isacharequal}\ Z\ {\isacharsemicolon}\isactrlsub L\ Y{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule\ iffI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}\ lens{\isacharunderscore}equiv{\isacharunderscore}def\ sublens{\isacharunderscore}def\ lens{\isacharunderscore}id{\isacharunderscore}unique{\isacharparenright}{\isacharbrackleft}{\isadigit{1}}{\isacharbrackright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rename{\isacharunderscore}tac\ Z\isactrlsub {\isadigit{1}}\ Z\isactrlsub {\isadigit{2}}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ x{\isacharequal}{\isachardoublequoteopen}Z\isactrlsub {\isadigit{1}}{\isachardoublequoteclose}\ \isakeyword{in}\ exI{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}simp{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}subgoal{\isacharunderscore}tac\ {\isachardoublequoteopen}Z\isactrlsub {\isadigit{2}}\ {\isacharsemicolon}\isactrlsub L\ Z\isactrlsub {\isadigit{1}}\ {\isacharequal}\ {\isadigit{1}}\isactrlsub L{\isachardoublequoteclose}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}meson\ bij{\isacharunderscore}lens{\isacharunderscore}via{\isacharunderscore}comp{\isacharunderscore}id{\isacharunderscore}right\ vwb{\isacharunderscore}lens{\isacharunderscore}wb{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}metis\ assms\ lens{\isacharunderscore}comp{\isacharunderscore}assoc\ lens{\isacharunderscore}id{\isacharunderscore}unique{\isacharparenright}\isanewline
\ \ \isacommand{using}\isamarkupfalse%
\ lens{\isacharunderscore}equiv{\isacharunderscore}via{\isacharunderscore}bij\ \isacommand{apply}\isamarkupfalse%
\ blast\isanewline
\isacommand{done}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
%
\begin{isamarkuptext}%
Lens override laws%
\end{isamarkuptext}\isamarkuptrue%
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}override{\isacharunderscore}id{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}S\isactrlsub {\isadigit{1}}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{2}}\ on\ {\isadigit{1}}\isactrlsub L\ {\isacharequal}\ S\isactrlsub {\isadigit{2}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}override{\isacharunderscore}def\ id{\isacharunderscore}lens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}override{\isacharunderscore}unit{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}S\isactrlsub {\isadigit{1}}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{2}}\ on\ {\isadigit{0}}\isactrlsub L\ {\isacharequal}\ S\isactrlsub {\isadigit{1}}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}override{\isacharunderscore}def\ zero{\isacharunderscore}lens{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}override{\isacharunderscore}overshadow{\isacharcolon}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}mwb{\isacharunderscore}lens\ Y{\isachardoublequoteclose}\ \ {\isachardoublequoteopen}X\ {\isasymsubseteq}\isactrlsub L\ Y{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isacharparenleft}S\isactrlsub {\isadigit{1}}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{2}}\ on\ X{\isacharparenright}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{3}}\ on\ Y\ {\isacharequal}\ S\isactrlsub {\isadigit{1}}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{3}}\ on\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{using}\isamarkupfalse%
\ assms\ \isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}override{\isacharunderscore}def\ sublens{\isacharunderscore}put{\isacharunderscore}put{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lens{\isacharunderscore}override{\isacharunderscore}plus{\isacharcolon}\isanewline
\ \ {\isachardoublequoteopen}X\ {\isasymbowtie}\ Y\ {\isasymLongrightarrow}\ S\isactrlsub {\isadigit{1}}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{2}}\ on\ {\isacharparenleft}X\ {\isacharplus}\isactrlsub L\ Y{\isacharparenright}\ {\isacharequal}\ {\isacharparenleft}S\isactrlsub {\isadigit{1}}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{2}}\ on\ X{\isacharparenright}\ {\isasymoplus}\isactrlsub L\ S\isactrlsub {\isadigit{2}}\ on\ Y{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}simp\ add{\isacharcolon}\ lens{\isacharunderscore}indep{\isacharunderscore}comm\ lens{\isacharunderscore}override{\isacharunderscore}def\ lens{\isacharunderscore}plus{\isacharunderscore}def{\isacharparenright}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\ \ \isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "root"
%%% End:
